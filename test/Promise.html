<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
		<script type="text/javascript">
			const PENDING='PENDING';
			const FULFILLED='FULFILLED';
			const REJECTED='REJECTED'
			class MyPromise{
			    constructor(executor){
			       this.value=undefined;
			       this.reason=undefined;
			       this.status=PENDING;
			       let resolve=value=>{
			           if(this.status===PENDING){
			           this.value=value;
			           this.status=FULFILLED;
			           }
			       };
			       let reject=reason=>{
			           if(this.status===PENDING){
			           this.reason=reason;
			           this.status=REJECTED;
			           }
			       }
			       try{
			            executor(resolve,reject);}
			       catch(err){
			          if(this.status===FULFILLED)  return;
			          if(this.status!==REJECTED){
                      this.status=REJECTED;
                      this.reason=err;
                     }
			       }
			    }
			    then(onFulfilled,onRejected){
			      if(this.status===FULFILLED){
			          onFulfilled(this.value);
			      }
			      if(this.status===REJECTED){
			          onRejected(this.reason);
			      }
			    }
			    catch(onError){
			    	onError(this.reason);
			    }
			}
			
			let promise=new MyPromise(function(resolve,reject){
//			    resolve("hhha");
//              reject("ssss");	
			    throw new Error("shibaile");
			})
			promise.then(function(data){
			    console.log('success:'+data); 
			},function(err){
			    console.log('error:'+err);
			})
			promise.catch(function(err){
				console.log(err);
			})
		</script>
	</body>
</html>
