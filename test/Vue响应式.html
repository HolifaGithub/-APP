<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
		<script type="text/javascript">
			function updateView(newValue){
				console.log("视图更新为:"+newValue);
			}
			function defineReactive(obj,prop,value){
				Object.defineProperty(obj,prop,{
					enumerable:true,
					configurable:false,
					get:function getter(){
						console.log(value);
						return value;
					},
					set:function setter(newValue){
						if(newValue===value)  return;
						updateView(newValue);
					}
				})
			}
			function observer(data){
				if(!data||typeof(data) !=='object'){
					return;
				}
				Object.keys(data).forEach(prop=>{
					defineReactive(data,prop,data[prop]);
				})
			}
			class Vue{
				constructor(options){
					this._data=options.data;
					observer(this._data);
				}
			}
			let vue=new Vue({data:{test:"hello"}});
			vue._data.test="change";
			vue._data.test;
		</script>
	</body>
</html>
