{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\Vue-app-server\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\Vue-app-server\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\Vue-app-server\\vue_app_00\\src\\components\\goods\\search.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\Vue-app-server\\vue_app_00\\src\\components\\goods\\search.vue","mtime":1563874081832},{"path":"C:\\Users\\Administrator\\Desktop\\Vue-app-server\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\Administrator\\Desktop\\Vue-app-server\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\Users\\Administrator\\Desktop\\Vue-app-server\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Toast } from 'mint-ui';\nexport default {\n  data: function data() {\n    return {\n      productList: '',\n      value: '',\n      pno: 0,\n      hasMore: false,\n      pageCount: 0\n    };\n  },\n  created: function created() {//\t\t\tthis.$http.get('http://127.0.0.1:3000/getproductlist').then(result=>{\n    //\t\t\t\tthis.productList=result.body;\n    //\t\t\t})\n  },\n  methods: {\n    toGoodInfo: function toGoodInfo(lid) {\n      this.$router.push(\"/home/goodinfo?lid=\".concat(lid));\n    },\n    search: function search() {\n      var _this = this;\n\n      if (this.value !== '') {\n        this.$http.get('http://127.0.0.1:3000/search?pno=' + this.pno + '&kw=' + this.value).then(function (result) {\n          _this.productList = result.body.data;\n\n          if (_this.productList.length > 0) {\n            _this.pageCount = result.body.pageCount;\n\n            if (_this.pno < _this.pageCount - 1 && _this.pageCount !== undefined) {\n              _this.hasMore = true;\n            }\n          } else {\n            Toast('暂未搜索到相关的商品!');\n          }\n        });\n      }\n    },\n    getMore: function getMore() {\n      var _this2 = this;\n\n      if (this.value !== '') {\n        this.pno++;\n        this.$http.get('http://127.0.0.1:3000/search?pno=' + this.pno + '&kw=' + this.value).then(function (result) {\n          _this2.productList = _this2.productList.concat(result.body.data);\n\n          if (_this2.pno === _this2.pageCount - 1) {\n            _this2.hasMore = false;\n          }\n        });\n      }\n    }\n  }\n};",{"version":3,"sources":["search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,SAAA,KAAA,QAAA,SAAA;AACA,eAAA;AACA,MADA,kBACA;AACA,WAAA;AACA,mBAAA,EADA;AAEA,aAAA,EAFA;AAGA,WAAA,CAHA;AAIA,eAAA,KAJA;AAKA,iBAAA;AALA,KAAA;AAOA,GATA;AAUA,SAVA,qBAUA,CACA;AACA;AACA;AACA,GAdA;AAeA,WAAA;AACA,cADA,sBACA,GADA,EACA;AACA,WAAA,OAAA,CAAA,IAAA,8BAAA,GAAA;AACA,KAHA;AAIA,UAJA,oBAIA;AAAA;;AACA,UAAA,KAAA,KAAA,KAAA,EAAA,EAAA;AACA,aAAA,KAAA,CAAA,GAAA,CAAA,sCAAA,KAAA,GAAA,GAAA,MAAA,GAAA,KAAA,KAAA,EAAA,IAAA,CAAA,kBAAA;AACA,gBAAA,WAAA,GAAA,OAAA,IAAA,CAAA,IAAA;;AACA,cAAA,MAAA,WAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,kBAAA,SAAA,GAAA,OAAA,IAAA,CAAA,SAAA;;AACA,gBAAA,MAAA,GAAA,GAAA,MAAA,SAAA,GAAA,CAAA,IAAA,MAAA,SAAA,KAAA,SAAA,EAAA;AACA,oBAAA,OAAA,GAAA,IAAA;AACA;AACA,WALA,MAMA;AACA,kBAAA,aAAA;AACA;AACA,SAXA;AAYA;AACA,KAnBA;AAoBA,WApBA,qBAoBA;AAAA;;AACA,UAAA,KAAA,KAAA,KAAA,EAAA,EAAA;AACA,aAAA,GAAA;AACA,aAAA,KAAA,CAAA,GAAA,CAAA,sCAAA,KAAA,GAAA,GAAA,MAAA,GAAA,KAAA,KAAA,EAAA,IAAA,CAAA,kBAAA;AACA,iBAAA,WAAA,GAAA,OAAA,WAAA,CAAA,MAAA,CAAA,OAAA,IAAA,CAAA,IAAA,CAAA;;AACA,cAAA,OAAA,GAAA,KAAA,OAAA,SAAA,GAAA,CAAA,EAAA;AACA,mBAAA,OAAA,GAAA,KAAA;AACA;AACA,SALA;AAMA;AACA;AA9BA;AAfA,CAAA","sourcesContent":["<template>\r\n\t<div id=\"app-search\">\r\n\t\t<div class=\"search-input\">\r\n\t\t<input type=\"text\" v-model=\"value\"  placeholder=\"关键字搜索\"  @keyup.13=\"search()\">\r\n\t\t<a><span class=\"mui-icon mui-icon-search\"></span></a>\r\n\t\t</div>\r\n\t\t<div class=\"good-item\" v-for=\"(item,i) in productList\" :key=\"i\" @click=\"toGoodInfo(item.lid)\">\r\n\t\t\t<img :src=\"`http://127.0.0.1:3000/${item.md}`\"/>\r\n\t\t\t<h4 class=\"good-title\"><img src=\"http://127.0.0.1:3000/img/favicon.ico\" />{{item.title}}</h4>\r\n\t\t\t<div class=\"good-info\">\r\n\t\t\t\t<p class=\"good-price\">\r\n\t\t\t\t\t<b>价格：</b>\r\n\t\t\t\t\t<span class=\"now\">&yen;{{item.price}}</span>\r\n\t\t\t\t\t<s class=\"old\">&yen;{{item.prev_price}}</s>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p class=\"good-selled\">\r\n\t\t\t\t\t<span>已售出：</span>\r\n\t\t\t\t\t<span>{{item.sold_count}}件</span>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p class=\"good-sell\">\r\n\t\t\t\t\t<span>热卖中</span>\r\n\t\t\t\t\t<span>剩余:{{item.remain_count}}件</span>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<mt-button type=\"primary\" size=\"large\" @click=\"getMore\" v-show=\"hasMore\">加载更多</mt-button>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport { Toast } from 'mint-ui';\r\n\texport default{\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t productList:'',\r\n\t\t\t value:'',\r\n\t\t\t pno:0,\r\n\t\t\t hasMore:false,\r\n\t\t\t pageCount:0\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated(){\r\n//\t\t\tthis.$http.get('http://127.0.0.1:3000/getproductlist').then(result=>{\r\n//\t\t\t\tthis.productList=result.body;\r\n//\t\t\t})\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\ttoGoodInfo(lid){\r\n\t\t\t\tthis.$router.push(`/home/goodinfo?lid=${lid}`);\r\n\t\t\t},\r\n\t\t\tsearch(){\r\n\t\t\t\tif(this.value!==''){\r\n\t\t\t\tthis.$http.get('http://127.0.0.1:3000/search?pno='+this.pno+'&kw='+this.value).then(result=>{\r\n\t\t\t\t\tthis.productList=result.body.data;\r\n\t\t\t\t\tif(this.productList.length>0){\r\n\t\t            this.pageCount=result.body.pageCount;\r\n\t\t\t\t\tif(this.pno<this.pageCount-1&&this.pageCount!==undefined){\r\n\t\t\t\t\t\tthis.hasMore=true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t           else{\r\n\t\t    \t\t\t\tToast('暂未搜索到相关的商品!');     \t\r\n\t\t           }\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetMore(){\r\n\t\t\tif(this.value!==''){\r\n\t\t\t\tthis.pno++;\r\n\t\t\t\tthis.$http.get('http://127.0.0.1:3000/search?pno='+this.pno+'&kw='+this.value).then(result=>{\r\n\t\t\t\t\t this.productList=this.productList.concat(result.body.data);\r\n\t\t\t\t\t if(this.pno===this.pageCount-1){\r\n\t\t\t\t\t\tthis.hasMore=false;\r\n\t\t\t\t\t      }\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t*{padding: 0;margin: 0;box-sizing: border-box;}\r\n\t#app-search{display: flex;justify-content: flex-start;flex-wrap: wrap;}\r\n\t#app-search div.good-item{border: 1px solid skyblue;box-shadow: 0 0 8px #ccc;border-radius: 9px;cursor: pointer;margin: 7px 3px 0 2px;}\r\n\t#app-search div.good-item img {width: 180px;border-bottom: 1px solid skyblue;}\r\n\t#app-search div.good-item h4.good-title{font-size: 12px;color: deepskyblue;width: 180px;text-align: center;}\r\n\t#app-search div.good-item h4.good-title img{width: 22px;}\r\n\t#app-search div.good-item div.good-info{margin-top: 10px;}\r\n\t#app-search div.good-item  span.now{font-weight: bold;color: red;font-size: 18px;margin-right: 10px;}\r\n\t#app-search div.good-item  s.old{font-size: 16px;}\r\n\t#app-search div.good-item p.good-selled{color: #555;font-weight: bold;margin-left: 5px}\r\n\t#app-search div.good-item p.good-sell{color: red;font-weight: bold;background-color: yellow;padding-left: 5px;}\r\n\t#app-search div.good-item p.good-sell span:first-child{margin-right: 40px;}\r\n\t#app-search div.good-item p.good-price{margin-left: 5px;}\r\n\t#app-search div.good-item p.good-price b{color: #555;}\r\n\t#app-search div.good-item{background-color: rgba()}\r\n\t\r\n\tdiv.search-input input{height: 50px;width:340px;margin-top:2px;}\r\n\tdiv.search-input input+a{display: inline-block;width: 34px;height: 43px;position: relative;top: -8px;cursor: pointer;background-color: #eee}\r\n</style>"],"sourceRoot":"src\\components\\goods"}]}