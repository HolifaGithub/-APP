{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\Vue-app-server\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\Vue-app-server\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\Vue-app-server\\vue_app_00\\src\\components\\user\\login.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\Vue-app-server\\vue_app_00\\src\\components\\user\\login.vue","mtime":1563867802157},{"path":"C:\\Users\\Administrator\\Desktop\\Vue-app-server\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\Administrator\\Desktop\\Vue-app-server\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\Users\\Administrator\\Desktop\\Vue-app-server\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      uname: '',\n      upwd: '',\n      back: '',\n      show: true\n    };\n  },\n  methods: {\n    clear: function clear() {\n      this.uname = '';\n      this.upwd = '';\n    },\n    login: function login() {\n      var _this = this;\n\n      this.$http.post(\"http://127.0.0.1:3000/signin\", {\n        uname: this.uname,\n        upwd: this.upwd\n      }, {\n        emulateJSON: true\n      }).then(function (result) {\n        if (result.body.ok === 1) {\n          if (_this.back !== undefined) {\n            _this.$router.push(_this.back);\n          } else {\n            _this.$router.push('/home');\n          }\n\n          _this.$http.get('http://127.0.0.1:3000/getshopcart').then(function (result2) {\n            var shopCartItems = result2.body;\n            var count = 0;\n            var sum = 0;\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n              for (var _iterator = shopCartItems[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                var item = _step.value;\n                count += item.count;\n                sum += item.price * item.count;\n              }\n            } catch (err) {\n              _didIteratorError = true;\n              _iteratorError = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion && _iterator.return != null) {\n                  _iterator.return();\n                }\n              } finally {\n                if (_didIteratorError) {\n                  throw _iteratorError;\n                }\n              }\n            }\n\n            _this.$store.commit(\"addShopCartCount\", count);\n\n            _this.$store.commit(\"setSumMoney\", sum);\n          });\n        }\n      });\n    },\n    signout: function signout() {\n      var _this2 = this;\n\n      this.$http.get('http://127.0.0.1:3000/signout').then(function (result) {\n        _this2.checkIsLogin();\n      });\n    },\n    checkIsLogin: function checkIsLogin() {\n      var _this3 = this;\n\n      this.$http.get(\"http://127.0.0.1:3000/islogin\").then(function (result) {\n        if (result.body.ok === 1) {\n          _this3.uname = result.body.uname;\n          _this3.show = false;\n        } else {\n          _this3.show = true;\n\n          _this3.$store.commit('clearShopCartCount');\n        }\n      });\n    }\n  },\n  created: function created() {\n    this.back = this.$route.query.back;\n    this.checkIsLogin();\n  }\n};",{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA,eAAA;AACA,MADA,kBACA;AACA,WAAA;AACA,aAAA,EADA;AAEA,YAAA,EAFA;AAGA,YAAA,EAHA;AAIA,YAAA;AAJA,KAAA;AAMA,GARA;AASA,WAAA;AACA,SADA,mBACA;AACA,WAAA,KAAA,GAAA,EAAA;AACA,WAAA,IAAA,GAAA,EAAA;AACA,KAJA;AAKA,SALA,mBAKA;AAAA;;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,8BAAA,EAAA;AAAA,eAAA,KAAA,KAAA;AAAA,cAAA,KAAA;AAAA,OAAA,EAAA;AAAA,qBAAA;AAAA,OAAA,EAAA,IAAA,CAAA,kBAAA;AACA,YAAA,OAAA,IAAA,CAAA,EAAA,KAAA,CAAA,EAAA;AACA,cAAA,MAAA,IAAA,KAAA,SAAA,EAAA;AACA,kBAAA,OAAA,CAAA,IAAA,CAAA,MAAA,IAAA;AACA,WAFA,MAGA;AACA,kBAAA,OAAA,CAAA,IAAA,CAAA,OAAA;AACA;;AACA,gBAAA,KAAA,CAAA,GAAA,CAAA,mCAAA,EAAA,IAAA,CAAA,mBAAA;AACA,gBAAA,gBAAA,QAAA,IAAA;AACA,gBAAA,QAAA,CAAA;AACA,gBAAA,MAAA,CAAA;AAHA;AAAA;AAAA;;AAAA;AAIA,mCAAA,aAAA,8HAAA;AAAA,oBAAA,IAAA;AACA,yBAAA,KAAA,KAAA;AACA,uBAAA,KAAA,KAAA,GAAA,KAAA,KAAA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAQA,kBAAA,MAAA,CAAA,MAAA,CAAA,kBAAA,EAAA,KAAA;;AACA,kBAAA,MAAA,CAAA,MAAA,CAAA,aAAA,EAAA,GAAA;AACA,WAVA;AAWA;AACA,OApBA;AAqBA,KA3BA;AA4BA,WA5BA,qBA4BA;AAAA;;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,+BAAA,EAAA,IAAA,CAAA,kBAAA;AACA,eAAA,YAAA;AACA,OAFA;AAGA,KAhCA;AAiCA,gBAjCA,0BAiCA;AAAA;;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,+BAAA,EAAA,IAAA,CAAA,kBAAA;AACA,YAAA,OAAA,IAAA,CAAA,EAAA,KAAA,CAAA,EAAA;AACA,iBAAA,KAAA,GAAA,OAAA,IAAA,CAAA,KAAA;AACA,iBAAA,IAAA,GAAA,KAAA;AACA,SAHA,MAIA;AACA,iBAAA,IAAA,GAAA,IAAA;;AACA,iBAAA,MAAA,CAAA,MAAA,CAAA,oBAAA;AACA;AAEA,OAVA;AAWA;AA7CA,GATA;AAwDA,SAxDA,qBAwDA;AACA,SAAA,IAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA;AACA,SAAA,YAAA;AACA;AA3DA,CAAA","sourcesContent":["<template>\r\n\t<div class=\"app-login\">\r\n\t\t<div class=\"login\" v-if=\"show\">\r\n\t\t\t<div class=\"login-bg\">\r\n\t\t\t\t <h3>学子商城登录</h3>\r\n\t\t\t\t<img src=\"http://127.0.0.1:3000/img/register/bg.png\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<form class=\"mui-input-group\">\r\n\t\t\t\t\t<div class=\"mui-input-row\">\r\n\t\t\t\t\t\t<label>用户名<img src=\"http://127.0.0.1:3000/img/login/yhm.png\"/></label>\r\n\t\t\t\t\t\t<input type=\"text\" class=\"mui-input-clear\" placeholder=\"请输入用户名\" v-model=\"uname\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"mui-input-row mui-password\">\r\n\t\t\t\t\t\t<label>密&nbsp;&nbsp;&nbsp;&nbsp;码<img src=\"http://127.0.0.1:3000/img/login/mm.png\"/></label>\r\n\t\t\t\t\t\t<input type=\"password\" class=\"mui-input-password\" placeholder=\"请输入密码\" v-model=\"upwd\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"mui-button-row\">\r\n\t\t\t\t\t\t<button type=\"button\" class=\"mui-btn mui-btn-primary\" @click=\"login\">登录</button>&nbsp;&nbsp;\r\n\t\t\t\t\t\t<button type=\"button\" class=\"mui-btn mui-btn-danger\" @click=\"clear\">取消</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\t\t\r\n\t\t</div>\r\n\t\t<div class=\"logined\" v-else>\r\n\t\t\t<div class=\"welcome\">Hello,{{uname}}</div>\r\n\t\t\t <mt-button  type=\"danger\" size=\"large\" @click=\"signout\">退出登录</mt-button>\r\n\t\t</div>\r\n\t\t\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default{\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\tuname:'',\r\n\t\t\t\tupwd:'',\r\n\t\t\t\tback:'',\r\n\t\t\t\tshow:true\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tclear(){\r\n\t\t\t\tthis.uname='';\r\n\t\t\t\tthis.upwd='';\r\n\t\t\t},\r\n\t\t\tlogin(){\r\n\t\t\t\tthis.$http.post(\"http://127.0.0.1:3000/signin\",{uname:this.uname,upwd:this.upwd},{emulateJSON:true}).then(result=>{\r\n\t\t\t\t\tif(result.body.ok===1){\r\n\t\t\t\t\t\tif(this.back!==undefined){\r\n\t\t\t\t\t\t\t  this.$router.push(this.back);\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t  this.$router.push('/home');\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t  \t\t\t\t  this.$http.get('http://127.0.0.1:3000/getshopcart').then(result2=>{\r\n\t\t\t\t\t\t\t\tvar shopCartItems=result2.body;\r\n\t\t\t\t\t\t\t\tvar count=0;\r\n\t\t\t\t\t\t\t\tvar sum=0;\r\n\t\t\t\t\t\t\t\tfor(var item of shopCartItems){\r\n\t\t\t\t\t\t\t\t\tcount+=item.count;\r\n\t\t\t\t\t\t\t\t\tsum +=item.price*item.count;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.$store.commit(\"addShopCartCount\",count);\r\n\t\t\t\t\t\t\t\tthis.$store.commit(\"setSumMoney\",sum); \r\n  \t\t\t\t  });\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsignout(){\r\n\t\t\t\tthis.$http.get('http://127.0.0.1:3000/signout').then(result=>{\r\n\t\t\t\t\tthis.checkIsLogin();\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcheckIsLogin(){\r\n\t\t\t\tthis.$http.get(\"http://127.0.0.1:3000/islogin\").then(result=>{\r\n\t\t\t\tif(result.body.ok===1){\r\n\t\t\t\t\tthis.uname=result.body.uname;\r\n\t\t\t\t\tthis.show=false;\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t    this.show=true;\r\n\t\t\t\tthis.$store.commit('clearShopCartCount');\r\n\t\t\t\t}\r\n\r\n\t\t\t})\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated(){\r\n\t\t\tthis.back=this.$route.query.back;\r\n            this.checkIsLogin();\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\tbody{background-image: url(http://127.0.0.1:3000/img/login/bg.jpg);}\r\n\tdiv.app-login div.login-bg h3{color: #eee;background-color:#484848;text-align: center;margin-bottom: 0;height: 50px;line-height: 2;margin-top: 0;}\r\n\tdiv.app-login div.login-bg img{width: 100%;}\r\n\tdiv.app-login form.mui-input-group{\tbackground-color: #F6F7F9;height: 150px;padding-top: 20px;}\r\n\tdiv.app-login form.mui-input-group img{vertical-align: middle;margin-left: 5px;margin-top: -5px;}\r\n\tdiv.app-login div.logined div.welcome{color: #555;font-size: 28px;text-align: center;background-color: #F3F9F9;height: 200px;line-height:7;font-weight: bold;}\r\n\tdiv.app-login div.logined button{cursor:pointer;}\r\n</style>"],"sourceRoot":"src\\components\\user"}]}