{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\Vue-app-server\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\Vue-app-server\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\Vue-app-server\\vue_app_00\\src\\components\\tabbar\\shopContainer.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\Vue-app-server\\vue_app_00\\src\\components\\tabbar\\shopContainer.vue","mtime":1563867961265},{"path":"C:\\Users\\Administrator\\Desktop\\Vue-app-server\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\Administrator\\Desktop\\Vue-app-server\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\Users\\Administrator\\Desktop\\Vue-app-server\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      shopCartItems: [],\n      count: 0,\n      sum: 0\n    };\n  },\n  created: function created() {\n    this.getCartItems();\n  },\n  methods: {\n    getCartItems: function getCartItems() {\n      var _this = this;\n\n      this.$http.get(\"http://127.0.0.1:3000/getshopcart\").then(function (result) {\n        _this.shopCartItems = result.body;\n      });\n    },\n    updateCart: function updateCart(iid, count) {\n      var _this2 = this;\n\n      this.$http.get(\"http://127.0.0.1:3000/updateCart?iid=\".concat(iid, \"&count=\").concat(count)).then(function (result) {\n        if (result.body.ok === 1) {\n          _this2.getCartItems();\n        }\n      });\n    },\n    addCount: function addCount(iid) {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.shopCartItems[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var item = _step.value;\n\n          if (item.iid === iid) {\n            if (item.count < 999) {\n              item.count++;\n              this.updateCart(item.iid, item.count);\n              this.getCartItems();\n              this.$store.commit(\"addShopCartCount\", 1);\n              break;\n            }\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    },\n    subCount: function subCount(iid) {\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.shopCartItems[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var item = _step2.value;\n\n          if (item.iid === iid) {\n            if (item.count >= 1) {\n              if (item.count === 1) {\n                confirm(\"确认要移除该商品吗?\");\n              }\n\n              item.count--;\n              this.updateCart(item.iid, item.count);\n              this.getCartItems();\n              this.$store.commit(\"subShopCartCount\", -1);\n              break;\n            }\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n    },\n    goPay: function goPay() {\n      this.$router.push('/home/pay');\n      this.$store.commit(\"setSumMoney\", this.sum);\n    }\n  },\n  computed: {\n    getSum: function getSum() {\n      this.sum = 0;\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = this.shopCartItems[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var i = _step3.value;\n          this.sum += i.count * i.price;\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n\n      return this.sum;\n    }\n  }\n};",{"version":3,"sources":["shopContainer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA,eAAA;AACA,MADA,kBACA;AACA,WAAA;AACA,qBAAA,EADA;AAEA,aAAA,CAFA;AAGA,WAAA;AAHA,KAAA;AAKA,GAPA;AAQA,SARA,qBAQA;AACA,SAAA,YAAA;AACA,GAVA;AAWA,WAAA;AACA,gBADA,0BACA;AAAA;;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,mCAAA,EAAA,IAAA,CAAA,kBAAA;AACA,cAAA,aAAA,GAAA,OAAA,IAAA;AACA,OAFA;AAGA,KALA;AAMA,cANA,sBAMA,GANA,EAMA,KANA,EAMA;AAAA;;AACA,WAAA,KAAA,CAAA,GAAA,gDAAA,GAAA,oBAAA,KAAA,GAAA,IAAA,CAAA,kBAAA;AACA,YAAA,OAAA,IAAA,CAAA,EAAA,KAAA,CAAA,EAAA;AACA,iBAAA,YAAA;AACA;AACA,OAJA;AAKA,KAZA;AAaA,YAbA,oBAaA,GAbA,EAaA;AAAA;AAAA;AAAA;;AAAA;AACA,6BAAA,KAAA,aAAA,8HAAA;AAAA,cAAA,IAAA;;AACA,cAAA,KAAA,GAAA,KAAA,GAAA,EAAA;AACA,gBAAA,KAAA,KAAA,GAAA,GAAA,EAAA;AACA,mBAAA,KAAA;AACA,mBAAA,UAAA,CAAA,KAAA,GAAA,EAAA,KAAA,KAAA;AACA,mBAAA,YAAA;AACA,mBAAA,MAAA,CAAA,MAAA,CAAA,kBAAA,EAAA,CAAA;AACA;AACA;AACA;AACA;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA,KAzBA;AA0BA,YA1BA,oBA0BA,GA1BA,EA0BA;AAAA;AAAA;AAAA;;AAAA;AACA,8BAAA,KAAA,aAAA,mIAAA;AAAA,cAAA,IAAA;;AACA,cAAA,KAAA,GAAA,KAAA,GAAA,EAAA;AACA,gBAAA,KAAA,KAAA,IAAA,CAAA,EAAA;AACA,kBAAA,KAAA,KAAA,KAAA,CAAA,EAAA;AACA,wBAAA,YAAA;AACA;;AACA,mBAAA,KAAA;AACA,mBAAA,UAAA,CAAA,KAAA,GAAA,EAAA,KAAA,KAAA;AACA,mBAAA,YAAA;AACA,mBAAA,MAAA,CAAA,MAAA,CAAA,kBAAA,EAAA,CAAA,CAAA;AACA;AACA;AACA;AACA;AAdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA,KAzCA;AA0CA,SA1CA,mBA0CA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,WAAA;AACA,WAAA,MAAA,CAAA,MAAA,CAAA,aAAA,EAAA,KAAA,GAAA;AACA;AA7CA,GAXA;AA0DA,YAAA;AACA,UADA,oBACA;AACA,WAAA,GAAA,GAAA,CAAA;AADA;AAAA;AAAA;;AAAA;AAEA,8BAAA,KAAA,aAAA,mIAAA;AAAA,cAAA,CAAA;AACA,eAAA,GAAA,IAAA,EAAA,KAAA,GAAA,EAAA,KAAA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAKA,aAAA,KAAA,GAAA;AACA;AAPA;AA1DA,CAAA","sourcesContent":["<template>\r\n\t<div class=\"app-shopcontainer\">\r\n\t\t<div class=\"mui-card\" >\r\n\t\t\t<div class=\"mui-card-header \">购物车列表</div>\r\n\t\t\t<div class=\"mui-card-content\" v-for=\"(item,i) in shopCartItems\" :key=\"i\">\r\n\t\t\t\t<div class=\"mui-card-content-inner\">\r\n\t\t\t\t<ul class=\"mui-table-view\">\r\n\t\t\t\t<li class=\"mui-table-view-cell mui-media\">\r\n\t\t\t\t\t\t<div class=\"mui-media-body\">\t\t\r\n\t\t\t\t\t\t\t<div class=\"title\">\r\n\t\t\t\t\t\t\t\t<img :src=\"`http://127.0.0.1:3000/${item.md}`\"/>\r\n\t\t\t\t\t\t\t<div>{{item.title}}</div> \r\n\t\t\t\t\t\t\t</div> \r\n\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t<span class=\"price\">单价：&yen;{{item.price.toFixed(2)}}</span>\r\n\t\t\t\t\t\t\t<div class=\"size\">规格：{{item.spec}}</div>\r\n\t\t\t\t\t\t\t<p class='mui-ellipsis'>\r\n\t\t\t\t\t\t\t数量：\t\r\n\t\t\t\t           <div class=\"mui-numbox\" data-numbox-min='1' data-numbox-max='9'>\r\n\t\t\t\t\t\t\t\t<button class=\"mui-btn mui-btn-numbox-minus\" type=\"button\"  @click=\"subCount(item.iid)\">-</button>\r\n\t\t\t\t\t\t\t\t<input id=\"test\" class=\"mui-input-numbox\" type=\"number\" v-model=\"item.count\"/>\r\n\t\t\t\t\t\t\t\t<button class=\"mui-btn mui-btn-numbox-plus\" type=\"button\" @click=\"addCount(item.iid)\">+</button>\r\n\t\t\t\t\t       </div>\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<hr />\r\n\t\t\t</div>\r\n\t\t\t<br /><br />\r\n\t\t\t<div class=\"mui-card-footer\">总价:{{getSum.toFixed(2)}}元\r\n\t\t\t<mt-button  type=\"danger\" @click=\"goPay\">去付款</mt-button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default{\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\tshopCartItems:[],\r\n\t\t\t\tcount:0,\r\n\t\t\t\tsum:0\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated(){\r\n\t\t\tthis.getCartItems();\r\n\t\t},\r\n\t\tmethods:{\r\n\t   getCartItems(){\r\n\t\t\tthis.$http.get(\"http://127.0.0.1:3000/getshopcart\").then(result=>{\r\n\t\t\tthis.shopCartItems=result.body;\r\n\t\t\t})\r\n\t\t\t},\r\n\t\t\tupdateCart(iid,count){\r\n\t\t\t\tthis.$http.get(`http://127.0.0.1:3000/updateCart?iid=${iid}&count=${count}`).then(result=>{\r\n\t\t\t\t\tif(result.body.ok===1){\r\n\t\t\t\t\t\tthis.getCartItems();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\taddCount(iid){\r\n             for(var item of this.shopCartItems){\r\n             \tif(item.iid===iid){\r\n             \t\tif(item.count<999){\r\n                  \t\titem.count++;\r\n                  \t\tthis.updateCart(item.iid,item.count);\r\n                  \t\tthis.getCartItems();\r\n                  \t\tthis.$store.commit(\"addShopCartCount\",1);\r\n                         break;\r\n             \t\t}\r\n             \t}\r\n             }\r\n\t\t\t},\r\n\t\t\tsubCount(iid){\r\n             for(var item of this.shopCartItems){\r\n             \tif(item.iid===iid){\r\n             \t\tif(item.count>=1){\r\n             \t\t\tif(item.count===1){\r\n             \t\t\t\tconfirm(\"确认要移除该商品吗?\");\r\n             \t\t\t}\r\n                  \t\titem.count--; \r\n                  \t\tthis.updateCart(item.iid,item.count);\r\n                  \t\tthis.getCartItems();\r\n                  \t\tthis.$store.commit(\"subShopCartCount\",-1);\r\n                  \t\tbreak;\r\n             \t\t}\r\n             \t}\r\n             }\r\n\t\t\t},\r\n\t\t\tgoPay(){\r\n\t\t\t\tthis.$router.push('/home/pay');\r\n\t\t\t\tthis.$store.commit(\"setSumMoney\",this.sum); \r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\tgetSum(){\r\n\t\t\t\tthis.sum=0;\r\n\t\t\t   for(var i of this.shopCartItems){\r\n\t\t\t     this.sum+=i.count*i.price;  \r\n\t\t\t  }\r\n\t\t\t\treturn this.sum;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\tdiv.mui-card div.mui-card-header{font-size: 17px;font-weight: bold;background-color:#87CEEB;text-align: center;}\r\n\tdiv.mui-card {margin-top: 0;width: 100%;margin-left: -2px;}\r\n\tdiv.mui-card div.mui-card-content{height: 250px;}\r\n\tdiv.mui-card div.mui-card-content div.title img{vertical-align: bottom;border: 1px solid #007AFF;width: 65px;float: left;}\r\n\tdiv.mui-card div.mui-card-content div.title div{color: #007AFF;margin-left: 90px;}\r\n\tdiv.mui-card div.mui-card-content span.price{font-size: 16px;}\r\n\tdiv.mui-card div.mui-card-content div.size{font-size:16px;}\r\n\tdiv.mui-card div.mui-card-content p.mui-ellipsis{font-size: 16px;font-weight: bold;}\r\n\tdiv.mui-card-footer{font-size: 18px;font-weight: bold;line-height: 2;position: fixed;bottom: 50px;background-color: #87CEEB;width: 100%;color: #000;}\r\n</style>"],"sourceRoot":"src\\components\\tabbar"}]}